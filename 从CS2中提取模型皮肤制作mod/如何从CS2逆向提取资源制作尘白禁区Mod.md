前几天蹭朋友的车囤了一些贴纸，小赚了一两千，于是有打算买刀什么的。毕竟一想我大学的时候蝴蝶刀才六八百一把，现在都什么逼价格了。

然后台风停工的时候逛BUFF的时候来了点兴致，看看能不能把CS2的皮肤提取出来做MOD，结果意外的还挺有意思。

# 截帧

最开始的想法当然是截帧，老样子Renderdoc拉起CS2。

从 [**“中国玩家专供CS2客户端”**](https://buff.163.com/market/csgo) 搜索一个皮肤，点击在游戏里预览，然后截帧。

然后我们无比熟练的把贴图全部扒光之后，会发现一个问题，就是顶点数据中法线和UV都是uint：

![image-20250924210304021](assets\image-20250924210304021.png)

好吧，倒也不是不能推，不过有没有更优雅的方法呢？

有的，兄弟，有的。

新建批处理：

```
set RENDERDOC_HOOK_EGL=0
"C:\Program Files\Google\Chrome\Application\chrome.exe" --disable-gpu-sandbox --gpu-startup-dialog --disable-direct-composition
```

启动Chrome后，它会弹出一个标明了自己PID的提示窗。

不要关闭，用RenderDoc注入（想必看我专栏的都是知道Renderdoc的大手子就在此不做废话了）。简单来说就是此时还未加载渲染库，所以留出了注入的空隙。

![image-20250924213936150](assets\image-20250924213936150.png)

看到这个便可认为大功告成。

此时截帧，你会发现找不到真正渲染的模型，往下一看全是Draw(4)，定位到图片发现资源名为ANGLE_TexStorage2D_WEBGL2。

![image-20250924214308705](assets\image-20250924214308705.png)

有没有可能，我是说，可能……什么叫Storage？是不是动起来的时候才不Storage？

![image-20250924214418082](assets\image-20250924214418082.png)

设置为2秒后截帧，随后切换到网页界面按住鼠标持续旋转，便可以截取到真正在渲染的模型：

![image-20250924214607219](assets\image-20250924214607219.png)

看到这么简单易懂的顶点格式真的是，家人们，谁懂啊~就像电工看到整齐的排电箱一样简直舒服到要尿出来：

![image-20250924214736304](assets\image-20250924214736304.png)

就像这种，图自B站Up青哥配电箱：

![image-20250924214853246](assets\image-20250924214853246.png)

# 形成模型

Renderdoc里看一眼拓扑，是Triangle List，直接一个detail wrangle：

```
for (int i = 0; i < @numpt / 3; i++)
{
    addprim(0, "poly", i * 3, i * 3 + 1, i * 3 + 2);
}
```

根据情况reverse、反转UV的y通道、创建切线信息，自不必说。

之后就是分离模型，尘白禁区这边的配件分为弹匣、消音器/消焰器、瞄具和战术配件，对于龙狙来说只需要拆出弹匣和瞄具就行。

先Fuse一下保证面和面共顶点，在Scene View里选择一个面，然后按Shift+G即可快速扩选临近面，很快就能把配件选出来，此时保证焦点在Scene View内按Tab创建Group节点就OK了。

最后把初始的法线切线信息transfer回来即可。

![image-20250924223304840](assets\image-20250924223304840.png)

最后主体如上所示，逐一保存FBX即可完成模型准备。

# 贴图

贴图的话就自己尝试，我自己的辨别经验是：

1. 黑白完全分明，呈现大量色块区域的是金属度；
2. 值相对平缓，没有极端的0或者1，且与形状关系不大的是粗糙度；
3. 有明显的形状相关性并且因此变暗的是AO；

这古早龙狙的着色在当今世代总感觉怪怪的：

![image-20250924222329008](assets\image-20250924222329008.png)

没有法线贴图就不说了，作为常识的话后托理应是橡胶，结果会被照出一片平平的高光，emmmmm我不好评价。

![image-20250924222412468](assets\image-20250924222412468.png)

原本打算用AI生成一个法线，花了一个小时整这个破ComfyUI起来，用Lotus模型试了下。

![image-20250924232722173](assets\image-20250924232722173.png)

关于Lotus的使用可以看这个帖子：https://www.bilibili.com/opus/1008170296315740164

关于ComfyUI插件的安装可以看这个专栏：https://zhuanlan.zhihu.com/p/663958698

不过后续肯定是要做二次元皮的，就先留着吧。

总之事前我寻思那么大一龙怎么放AI里肯定能刻画出法线，同时AI会对周围的细碎图案感到迷惑所以应该会输出平面，所以用AI肯定行——结果证明我想多了，感觉不如之前打折买的38块钱MainTex 2：

![image-20250924233013760](assets\image-20250924233013760.png)

虽说还能再修不过我是懒得动了，我擦那个距离能看得到啥瑕疵，早采样到mip2去了。

# 其他

剩余部分就参考我之前的文章导入即可。

最后看下效果：

![龙狙.jpg](assets\龙狙-1758817092972-3.jpg)
