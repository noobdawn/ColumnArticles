# 前言

说起来最近几年看知乎，TA入行几乎个个都是GAMES高手，人手一个软渲染器或者个人引擎。他妈的，也太卷了吧，你说引擎图程算了，TA怎么也开始卷这个。

行吧，我也随便写了个[SoftRenderer](https://github.com/noobdawn/SoftRenderer)，这个软渲染器纯粹是我自己把脑子里的东西凑活一下然后和AI搓出来的，没有看过任何GAMES视频所以如果有错漏或者性能问题那也是很正常的。

这里上个图：

![image-20260111215057337](assets\软渲染器截图.png)

相信怎么写软渲染器这种Rendering上的东西一抓一大把，我这里也就不再赘述了。

写这篇文章的初衷其实是向大家介绍如何配置SDL2在VSCode下的开发环境，毕竟我最开始从收藏夹里翻出了@拳四郎 的[如何写一个软渲染(1)](https://zhuanlan.zhihu.com/p/42725758)，发现VS工程还是太重量级了。

个人感觉写toy这种事情还是要轻快舒爽，讲究一个寓Code于乐。如果你也想动手开始写一个软渲染器，又希望拥有轻快的编码体验可以看看下面的内容，或许能促使你立刻产生编写渲染器的冲动。

总之我自己是写完之后感觉这个环境还是挺神清气爽的。

# 安装MinGW

前往[MinGW Github Release](https://github.com/skeeto/w64devkit/releases)下载 w64devkit-x64-2.5.0.7z.exe，这是个自解压程序，所以记住自己放哪了。

我放在 `D:\Github\SoftRenderer\w64devkit`，以下记叙为MinGW安装目录。

将MinGW安装目录的`bin`目录添加到系统变量中。

# 下载SDL2

前往[SDL Github Release](https://github.com/libsdl-org/SDL/releases)，找到SDL 2.32.10版本，下载`SDL2-2.32.10-win32-x64.zip`和`SDL2-devel-2.32.10-mingw.zip`。

前者是已编译的运行库，解压得到SDL.dll放到工作目录下。

后者解压后，将其中的x86_64-w64-mingw32文件夹复制到MinGW安装目录下。

# 配置VSCode工程

在工作目录下新建.vscode工程，并创建配置文件，下述跟MinGW安装目录相关的地方记得修改。

```json
// tasks.json
{
    "version": "2.0.0",
    "tasks": [
        {
            "type": "shell",
            "label": "g++.exe build active file",
            "command": "D:\\Github\\SoftRenderer\\w64devkit\\bin\\g++.exe",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}\\${fileBasenameNoExtension}.exe",
                "-lmingw32",
                "-lSDL2main",
                "-lSDL2",
                "-mwindows"
            ],
            "options": {
                "cwd": "D:\\Github\\SoftRenderer\\w64devkit\\bin"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        }
    ]
}
```

```json
// launch.json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "g++.exe build and debug active file",
            "type": "cppdbg",
            "request": "launch",
            "program": "${fileDirname}\\${fileBasenameNoExtension}.exe",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "D:\\Github\\SoftRenderer\\w64devkit\\bin\\gdb.exe",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "g++.exe build active file"
        }
    ]
}
```

```json
// c_cpp_properties.json
{
    "configurations": [
        {
            "name": "Win32",
            "includePath": [
                "${workspaceFolder}/**",
                "D:\\Github\\SoftRenderer\\w64devkit\\x86_64-w64-mingw32\\include\\**"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE"
            ],
            "compilerPath": "D:\\Github\\SoftRenderer\\w64devkit\\bin\\gcc.exe",
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "gcc-x64"
        }
    ],
    "version": 4
}
```

# 测试空工程

最后新建main.cpp：

```c++
#include <stdio.h>
#include "SDL2/SDL.h"

int main(int argc, char* args[])
{
	int widowWidth = 640;
	int windowHeight = 360;

	if (SDL_Init(SDL_INIT_VIDEO) < 0) {
		printf("SDL could not initialize! SDL_Error: %s\n", SDL_GetError());
		return -1;
	}

	SDL_Window* window = SDL_CreateWindow("SoftRenderer", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, widowWidth, windowHeight, SDL_WINDOW_SHOWN);
	if (window == NULL) {
		printf("Window could not be created! SDL_Error: %s\n", SDL_GetError());
		SDL_Quit();
		return -1;
	}

	SDL_Renderer* renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);
	if (renderer == NULL) {
		printf("Renderer could not be created! SDL Error: %s\n", SDL_GetError());
		SDL_DestroyWindow(window);
		SDL_Quit();
		return -1;
	}

	bool quit = false;
	SDL_Event e;

	while (!quit) {
		while (SDL_PollEvent(&e) != 0) {
			if (e.type == SDL_QUIT) {
				quit = true;
			}
		}

		SDL_SetRenderDrawColor(renderer, 100, 100, 100, 255);
		SDL_RenderClear(renderer);
		SDL_RenderPresent(renderer);
	}

	SDL_DestroyRenderer(renderer);
	SDL_DestroyWindow(window);
	SDL_Quit();

	return 0;
}
```

按Ctrl+Shift+B构建，即可生成在工作目录下生成main.exe，之后即可运行查看空窗体。

# 其他

如果你在开发过程中遇到了其他环境配置问题，或者需要引入stb_image和tinyobj之类的库，不妨看看我的提交记录，里面有相对明细的迭代过程：

![image-20260111220009140](assets\提交记录.png)
